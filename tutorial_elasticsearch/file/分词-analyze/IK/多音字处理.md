### 多音字处理
从elasticsearch-analysis-pinyin项目中找到nlp-lang-1.7.jar,解压之后在polyphone.txt文件中按照格式添加.  

* 例如:添加`楚乔传=chu qiao zhuan`
```
curl  -H "Content-Type:application/json" -XGET "localhost:9200/_analyze?pretty" -d'
{
  "analyzer": "pinyin",
  "text": "楚乔传"
}
'
```
结果:
```
{
  "tokens" : [
    {
      "token" : "chu",
      "start_offset" : 0,
      "end_offset" : 0,
      "type" : "word",
      "position" : 0
    },
    {
      "token" : "cqz",
      "start_offset" : 0,
      "end_offset" : 0,
      "type" : "word",
      "position" : 0
    },
    {
      "token" : "qiao",
      "start_offset" : 0,
      "end_offset" : 0,
      "type" : "word",
      "position" : 1
    },
    {
      "token" : "zhuan",
      "start_offset" : 0,
      "end_offset" : 0,
      "type" : "word",
      "position" : 2
    }
  ]
}
```

#### 自定义分析器
```
curl -H 'Content-Type: application/json' -XPUT "localhost:9200/ik_duoyinzi_tutorial" -d ' 
{
   "settings":{
      "analysis":{
         "char_filter":{},
         "tokenizer":{},
         "filter":{
            "custom_pinyin":{
                "type": "pinyin"
            }
         },
         "analyzer":{
            "ik_pinyin_analyzer":{
               "type":"custom",
               "tokenizer":"ik_smart",
               "filter":["custom_pinyin"]
            }
         }
      }
   },
   "mappings":{
      "star":{
         "properties":{
             "id":{
                "type":"keyword"
             },
             "name":{
                "type":"keyword",
                "fields":{
                   "pinyin":{
                      "type": "text",
                      "store": "true",
                      "term_vector": "with_positions_offsets",
                      "analyzer": "ik_pinyin_analyzer",
                      "boost": 10
                   }
                }
             }
         }
      }
   }
}
'
```
测试数据 楚乔传
```
curl  -H "Content-Type:application/json" -XGET "localhost:9200/ik_duoyinzi_tutorial/_analyze?pretty" -d'
{
  "analyzer": "pinyin",
  "text": "楚乔传"
}
'
```
结果同上